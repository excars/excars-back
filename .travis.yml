language: python
python:
  - "3.6"

sudo: required
dist: trusty

services:
  - docker

before_install:
  - docker-compose build

install:
  - pip install codecov
  - pip install coverage

script:
  - docker-compose run app make ci

after_script:
  - docker-compose down


after_success:
  - mv .coverage .coverage.travis
  - coverage combine --append
  - codecov
